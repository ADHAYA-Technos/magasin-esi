{"ast":null,"code":"import React,{useEffect,useState}from'react';import assets from'../../assets';import axios from'axios';import'./LoginSignUp.css';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";const LoginSignUp=props=>{const[email,setEmail]=useState('');const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[registrationSuccess,setRegistrationSuccess]=useState(false);const[registrationMessage,setRegistrationMessage]=useState('');const[isLogButtonDisabled,setIsLogButtonDisabled]=useState(false);const[isRegButtonDisabled,setIsRegButtonDisabled]=useState(true);const[action,setAction]=useState(\"Sign Up\");useEffect(()=>{if(action==='Sign Up'&&email&&password&&username){setIsLogButtonDisabled(false);setIsRegButtonDisabled(false);}else if(action==='Sign Up'&&(!email||!password||!username)){setIsLogButtonDisabled(false);setIsRegButtonDisabled(true);}else if(action==='Log In'&&email&&password){setIsRegButtonDisabled(false);setIsLogButtonDisabled(false);}else if(action==='Log In'&&(!email||!password)){setIsRegButtonDisabled(false);setIsLogButtonDisabled(true);}},[email,username,password,action]);const handleLogin=async()=>{try{console.log(email,password);const response=await axios.post('/login',{email,password});const isAdmin=response.data.isAdmin;if(isAdmin){// Redirect to admin dashboard\nwindow.location.href='/';}else{window.location.href='/MainLayout';}}catch(error){console.error('Login failed:',error);// Handle login failure\n}};const handleLoginClick=()=>{if(action==='Log In'){handleLogin();}else{setAction('Log In');}};const handleRegisterClick=()=>{if(action==='Sign Up'){handleRegister();}else{setAction('Sign Up');}};const handleRegister=async()=>{try{const response=await axios.post('/register',{username,email,password});// Handle registration success, e.g., show a message to the user\nif(response.data.success){setRegistrationSuccess(true);setRegistrationMessage('Registration successful! You will receive an email when your account is approved.');setUsername('');setPassword('');window.location.href='/emailConfirmation';}else{setRegistrationMessage('User already registered! Please log in , or wait for Admin confirmation');setUsername('');setPassword('');}console.log('Registration successful:',response.data);}catch(error){console.error('Registration failed:',error);// Handle registration failure\n}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text\",children:[\" \",action,\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:\"underline\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputs\",children:[action===\"Log In\"?/*#__PURE__*/_jsx(\"div\",{}):/*#__PURE__*/_jsxs(\"div\",{className:\"input\",children:[/*#__PURE__*/_jsx(\"img\",{src:assets.image.person,alt:\"\"}),/*#__PURE__*/_jsx(\"input\",{type:\"username\",placeholder:\"Full Name\",value:username,onChange:e=>setUsername(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input\",children:[/*#__PURE__*/_jsx(\"img\",{src:assets.image.email,alt:\"\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input\",children:[/*#__PURE__*/_jsx(\"img\",{src:assets.image.password,alt:\"\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value),required:true})]})]}),action===\"Sign Up\"?/*#__PURE__*/_jsx(\"div\",{}):/*#__PURE__*/_jsxs(\"div\",{className:\"forgot-password\",children:[\"Lost Password ? \",/*#__PURE__*/_jsx(\"span\",{children:\"Click Here !\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"submit-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:action===\"Sign Up\"?\"submit\":\"submit gray\",onClick:handleRegisterClick,disabled:isRegButtonDisabled,children:\"Sign Up\"}),/*#__PURE__*/_jsx(\"button\",{className:action===\"Sign Up\"?\"submit gray\":\"submit\",onClick:handleLoginClick,disabled:isLogButtonDisabled,children:\"Log in\"})]})]}),registrationMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"registration-message \".concat(registrationSuccess?'success':'error'),children:registrationMessage})]});};export default LoginSignUp;","map":{"version":3,"names":["React","useEffect","useState","assets","axios","jsxs","_jsxs","jsx","_jsx","LoginSignUp","props","email","setEmail","username","setUsername","password","setPassword","registrationSuccess","setRegistrationSuccess","registrationMessage","setRegistrationMessage","isLogButtonDisabled","setIsLogButtonDisabled","isRegButtonDisabled","setIsRegButtonDisabled","action","setAction","handleLogin","console","log","response","post","isAdmin","data","window","location","href","error","handleLoginClick","handleRegisterClick","handleRegister","success","children","className","src","image","person","alt","type","placeholder","value","onChange","e","target","required","onClick","disabled","concat"],"sources":["C:/Users/ACER NITRO/OneDrive/Bureau/ADHAYA_Magasin_ESI/magasin-esi/client/src/pages/LoginSignUp/LoginSignUp.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport assets from '../../assets';\nimport axios from 'axios';\nimport './LoginSignUp.css'\ntype Props = {}\n\nconst LoginSignUp = (props: Props) => {\n    const [email, setEmail] = useState('');\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const [registrationSuccess, setRegistrationSuccess] = useState(false);\n    const [registrationMessage, setRegistrationMessage] = useState('');\n    const [isLogButtonDisabled, setIsLogButtonDisabled] = useState(false);\n    const [isRegButtonDisabled, setIsRegButtonDisabled] = useState(true);\n   const [action,setAction] =useState(\"Sign Up\");\n\n\n    useEffect(() => {\n      if (action === 'Sign Up' && email && password && username) {\n        setIsLogButtonDisabled(false);\n        setIsRegButtonDisabled(false);\n      }else if (action === 'Sign Up' && (!email || !password || !username)) {\n        setIsLogButtonDisabled(false);\n        setIsRegButtonDisabled(true);\n      } else if (action === 'Log In' && email && password) {\n        setIsRegButtonDisabled(false);\n        setIsLogButtonDisabled(false);\n      } else if (action === 'Log In' && (!email || !password)){\n        setIsRegButtonDisabled(false);\n        setIsLogButtonDisabled(true);\n   \n      }\n    }, [email, username, password, action]);\n    \n    const handleLogin = async () => {\n        try {\n            console.log(email, password);\t\n          const response = await axios.post('/login', { email, password });\n          const isAdmin = response.data.isAdmin;\n          if (isAdmin) {\n            // Redirect to admin dashboard\n            window.location.href = '/';\n          } else {\n            window.location.href = '/MainLayout';\n          }\n        } catch (error) {\n          console.error('Login failed:', error);\n          // Handle login failure\n        }\n      };  \n      const handleLoginClick = () => {\n        if (action === 'Log In') {\n          handleLogin();\n        } else {\n          \n          setAction('Log In');\n          \n        }\n      };\n      const handleRegisterClick = () => {\n        if (action === 'Sign Up') {\n            handleRegister();\n        } else {\n          setAction('Sign Up');\n        }\n      };\n      const handleRegister = async () => {\n        try {\n            const response = await axios.post('/register', { username,email, password });\n            // Handle registration success, e.g., show a message to the user\n            if (response.data.success) {\n                setRegistrationSuccess(true);\n                setRegistrationMessage('Registration successful! You will receive an email when your account is approved.');\n                setUsername('');\n                setPassword('');\n                window.location.href = '/emailConfirmation';\n              } else {\n                setRegistrationMessage('User already registered! Please log in , or wait for Admin confirmation');\n                setUsername('');\n                setPassword('');\n              }\n        \n            console.log('Registration successful:', response.data);\n        } catch (error) {\n            console.error('Registration failed:', error);\n            // Handle registration failure\n        }\n    };\n\n   \n  return (\n    <div>\n        <div >\n            <div className='container'>\n            <div className=\"header\">\n                <div className=\"text\"> {action} </div>\n                <div className=\"underline\"></div>\n            </div>\n            <div className=\"inputs\">\n               \n            \n                {action===\"Log In\"?<div></div> :<div className=\"input\">\n                    <img src={assets.image.person} alt =\"\"/>\n                    <input type=\"username\" placeholder='Full Name' value={username} onChange={(e) => setUsername(e.target.value)} required/>\n                </div>}\n                <div className=\"input\">\n                    <img src={assets.image.email} alt =\"\"/>\n                    <input type=\"email\" placeholder='Email' value={email} onChange={(e) => setEmail(e.target.value)} required/>\n                </div>\n                <div className=\"input\">\n                    <img src={assets.image.password} alt =\"\"/>\n                    <input type=\"password\" placeholder='Password' value={password} onChange={(e) => setPassword(e.target.value)} required/>\n                </div>\n            </div>\n        \n            {action===\"Sign Up\"?<div></div> :<div className=\"forgot-password\" >Lost Password ? <span>Click Here !</span></div>}\n        </div>\n        <div className=\"submit-container\">\n            <button className={action===\"Sign Up\"?\"submit\":\"submit gray\"} onClick={handleRegisterClick} disabled={isRegButtonDisabled}>Sign Up</button>\n            <button className={action===\"Sign Up\"?\"submit gray\":\"submit\"} onClick={handleLoginClick } disabled={isLogButtonDisabled}>Log in</button>\n        </div>\n        </div>\n        {registrationMessage && (\n        <div className={`registration-message ${registrationSuccess ? 'success' : 'error'}`}>\n          {registrationMessage}\n        </div>\n      )}\n        </div>\n      \n  )\n}\n\nexport default LoginSignUp ;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}